jQuery(document).ready(function(o){o("#create-project-form").validate({errorElement:"small",errorPlacement:function(e,t){t.hasClass("category-dropdown")?o("div.custom.dropdown.category-dropdown").after(e):t.is(":radio")||t.is(":checkbox")?e.insertAfter(t.parent().siblings().last()):t.after(e)},rules:{budget_price:{required:!0,number:!0}}}),o(".locked").attr("disabled","disabled"),o("#create-project-form").submit(function(e){if(o(".file-upload.required .no-media").is(":visible")){var t=hrb_i18n.file_upload_required;o(".file-upload-error").remove(),o(".file-upload.required .media_placeholder").after('<a class="file-upload-error" href="#"></a><span class="file-upload-error error">'+t+"</span>"),o(".file-upload-error").show(),o("html,body").animate({scrollTop:o("a.file-upload-error").offset().top-100}),e.preventDefault()}}),o("#category, #sub_category").change(function(){if(o(this).val()){var e={action:"app-render-project-form",category:o(this).val(),listing_id:o("input[name=ID]").val()};o.post(hrb_i18n.ajaxurl,e,function(e){o("#project-form-custom-fields").html(e),o(".file-upload .upload_button").on("click",function(){o(".file-upload-error").remove()}),o(document).foundation("forms")})}}).find("option").eq(0).val(""),o("#budget_type").change(function(){"hourly"==o(this).val()?o(".budget-min-hours").fadeIn():o(".budget-min-hours").fadeOut()}),o("#budget_currency").change(function(){var e=o("option:selected",this).attr("currency-symbol");o(".selected-currency").html(e)}),o("#budget_type").trigger("change"),o("#budget_currency").trigger("change");var t=0;o("#category").change(function(){if(0!=o(this).val()?o("#sub_category").removeAttr("disabled"):o("#sub_category").attr("disabled","disabled"),t==o(this).val())return!0;o("label[for=sub_category]").append(hrb_i18n.ajaxloader);var e={action:"hrb_output_subcategories",selected:o("#sub_category").attr("pre-selected"),category:o(this).val(),_ajax_nonce:hrb_i18n.ajax_nonce};o.ajax({url:hrb_i18n.ajaxurl,data:e,type:"POST"}).done(function(e){o("#sub_category").html(e).trigger("change"),o(".processing").hide(),Foundation.libs.forms.refresh_custom_select(o("#sub_category"),!0)}),t=o("#category option:selected").val()}),o("#category").trigger("change"),o("#skills").select2({maximumSelectionSize:app_project_edit_i18n.maximum_skills_selection,placeholder:app_project_edit_i18n.skills_placeholder,formatNoMatches:app_project_edit_i18n.skills_formatNoMatches,formatSelectionTooBig:app_project_edit_i18n.skills_formatSelectionTooBig,formatLoadMore:app_project_edit_i18n.skills_formatLoadMore,formatSearching:app_project_edit_i18n.skills_formatSearching}),o("#tags").tagsManager({prefilled:o("#tags").val(),tagsContainer:".tags-tags"}),o("body").on("keydown","input#tags",function(e){9==e.which&&(e.preventDefault(),o("input[tabindex=12]").focus())}),o("#location_type").change(function(){if("local"!=o(this).val())o(".custom-location").hide(),o(".custom-location input").val("");else{o(".custom-location").fadeIn();var e={details:"form",detailsAttribute:"data-geo"};if(void 0!==app_project_edit_i18n.geocomplete_options){e=o.extend(e,app_project_edit_i18n.geocomplete_options),o("#location").geocomplete(e);var t=o("#location").geocomplete("autocomplete");void 0!==app_project_edit_i18n.geocomplete_options.componentRestrictions&&t.setComponentRestrictions(app_project_edit_i18n.geocomplete_options.componentRestrictions),void 0!==app_project_edit_i18n.geocomplete_options.types&&t.setTypes(app_project_edit_i18n.geocomplete_options.types)}}}),o("#location_type").trigger("change")});